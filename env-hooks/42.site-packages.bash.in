#!/usr/bin/env bash
# generated from catkin_pip/env-hooks/42.site-packages.bash.in

# For catkin it is simpler to do that in _setup_util.py.in.
# but until catkin does this by default the proper way from outside catkin is probably a env-hook

pythonpathprepend() {
  for ARG in "$@"
  do
    # if ARG exists
    if [ -d "$ARG" ]; then
        # if PYTHONPATH is empty
        if [ -z "$PYTHONPATH" ]; then
            PYTHONPATH="$ARG"
        else
            # we move it from tail to head of PATH list
            IFS=':' read -ra PP_ARRAY <<< "${PYTHONPATH}"
            PYTHONPATH=$ARG
            for p in "${PP_ARRAY[@]}"; do
                if [ $p != $ARG ]; then
                    PYTHONPATH=${PYTHONPATH}:$p
                    #echo $PYTHONPATH
                fi
            done
        fi
    fi
  done
}


CATKIN_PIP_ENV_HOOKS_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
CATKIN_PIP_CURRENT_WORKSPACE="$( dirname "$( dirname "$(dirname "${CATKIN_PIP_ENV_HOOKS_DIR}" )" )" )"

# We should enable site-package only on devel space.
# Install space should behave like packages, everything in debian layout.
if [ "@DEVELSPACE@" == "True" ]; then

    echo "Setting up ${CATKIN_PIP_CURRENT_WORKSPACE}/lib/python2.7/site-packages in PYTHONPATH"
    # we combine it with site-packages (pip default) location, before attempting to prepend to the python path
    pythonpathprepend "${CATKIN_PIP_CURRENT_WORKSPACE}/lib/python2.7/site-packages"
fi